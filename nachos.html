<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Surprise Box ‚Äî For My Cutie (Maui & Roxy)</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#fff5f7;
  --bg2:#ffeef2;
  --pink:#ff6b95;
  --rose:#d64b76;
  --accent:#ff9dbb;
  --muted:#5a2a3c;
  --card-shadow:0 10px 30px rgba(214,75,118,0.08);
  --glass: rgba(255,255,255,0.7);
  --fruit-size: 54px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Montserrat,system-ui,Arial;color:var(--muted);background:linear-gradient(135deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased}
.wrap{max-width:1100px;margin:28px auto;padding:18px}
header.hero{
  text-align:center;padding:44px 20px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.78), rgba(255,255,255,0.6));box-shadow:var(--card-shadow);
  position:relative; overflow:hidden;
}
.title{font-family:'Playfair Display',serif;font-size:42px;color:var(--rose);margin-bottom:6px}
.subtitle{font-size:15px;color:#6b3a42;margin-bottom:12px}
.open-btn{
  display:inline-flex;align-items:center;gap:10px;padding:12px 20px;border-radius:999px;background:linear-gradient(90deg,var(--pink),var(--accent));color:white;font-weight:700;border:none;cursor:pointer;font-size:15px;box-shadow:0 10px 28px rgba(255,107,149,0.18);
}
.badge-row{margin-top:14px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
.badge{background:var(--glass);backdrop-filter: blur(6px);padding:8px 12px;border-radius:999px;font-weight:600;color:var(--rose);font-size:13px}
.grid{display:grid;grid-template-columns:1fr 380px;gap:20px;margin-top:20px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.card{background:linear-gradient(180deg, rgba(255,255,255,0.95), white);border-radius:14px;padding:14px;box-shadow:var(--card-shadow)}
.intro{display:flex;gap:14px;align-items:center}
.avatar{width:86px;height:86px;border-radius:16px;background:linear-gradient(135deg,var(--pink),var(--rose));display:flex;align-items:center;justify-content:center;font-size:36px;color:white;box-shadow:0 8px 30px rgba(214,75,118,0.12)}
.intro h3{margin:0;font-size:18px;color:var(--rose);font-weight:700}
.intro p{margin:4px 0 0;font-size:14px;color:#6b3a42}
.typing{font-family:monospace;font-size:15px;color:var(--rose);height:28px;overflow:hidden;white-space:nowrap;margin-top:6px}
.mini-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
@media(max-width:560px){.mini-grid{grid-template-columns:1fr}}
.mini{padding:12px;border-radius:12px;background:linear-gradient(180deg,#fff,#fff6f9);font-weight:600;color:var(--muted)}
.mini h4{margin:0 0 6px 0;color:var(--rose);font-size:15px}
.poem{font-family:'Playfair Display',serif;font-size:16px;line-height:1.6;color:#5a2a3c;padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,245,247,0.9), rgba(255,240,245,0.97));margin-top:12px}

/* Discord mockup */
.discord{margin-top:12px;border-radius:12px;padding:12px;background:#f7f9fb;border:1px solid rgba(90,42,60,0.03)}
.msg{display:flex;gap:10px;margin-bottom:10px}
.avatar-sm{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--pink),var(--rose));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:14px}
.bubble{background:white;padding:8px 12px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.03);max-width:76%;font-size:14px}
.me .bubble{background:linear-gradient(90deg,#fff6fb,#fff0f3);border:1px solid rgba(214,75,118,0.06)}
.her .bubble{background:linear-gradient(90deg,#fff,#fff6f9);border:1px solid rgba(214,75,118,0.03)}
.time{font-size:11px;color:#9b6a74;margin-top:6px}

/* right column */
.right .panel{margin-bottom:14px;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.95), white)}
.song-list{display:flex;flex-direction:column;gap:8px}
.song{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-radius:10px;background:linear-gradient(90deg, rgba(255,230,240,0.9), rgba(255,245,247,0.9));font-weight:600}
.song small{font-weight:400;color:#7a3946;font-size:13px}
.food-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
.food{padding:8px 12px;border-radius:999px;background:linear-gradient(90deg,#fff5f7,#fff0f3);font-weight:700;color:var(--rose)}

/* gallery */
.gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;margin-top:10px}
.gallery .tile{background:linear-gradient(180deg,#fff,#fff6fb);padding:12px;border-radius:12px;text-align:center}

/* mini-game area */
.game-area{margin-top:12px;background:linear-gradient(180deg,#fff7fb,#fff2f6);border-radius:12px;padding:12px;position:relative;overflow:hidden}
.game-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.timer{font-weight:800;color:var(--rose);font-size:20px}
.score{font-weight:800;color:#5a2a3c}
.game-stage{height:320px;border-radius:10px;background:linear-gradient(180deg,#fff,#fff5f8);position:relative;overflow:hidden;border:1px dashed rgba(214,75,118,0.08)}
.game-instructions{font-size:13px;color:#6b3a42;margin-top:8px}

/* gun cursor (V2) */
.gun-cursor{
  position:fixed;z-index:9999;pointer-events:none;width:48px;height:48px;transform:translate(-50%,-50%) rotate(-10deg);display:none;
  align-items:center;justify-content:center;font-size:22px;
  filter:drop-shadow(0 6px 14px rgba(214,75,118,0.18));
}

/* heart target */
.target{
  position:absolute;width:52px;height:52px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;
  user-select:none; -webkit-user-select:none;
  transform-origin:center;
  transition:transform .12s ease;
  box-shadow:0 8px 18px rgba(214,75,118,0.08);
}

/* fruit dancer container */
.fruit-stage{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:20;overflow:hidden}

/* fruit item style F2 (expressive) */
.fruit{
  position:absolute;width:var(--fruit-size);height:var(--fruit-size);border-radius:14px;display:flex;align-items:center;justify-content:center;
  color:white;font-weight:800;font-size:22px;pointer-events:none;
  transform-origin:center center;
  box-shadow:0 8px 18px rgba(0,0,0,0.08);
}
.fruit .face{
  position:absolute;bottom:8px;left:50%;transform:translateX(-50%);width:86%;text-align:center;font-size:11px;line-height:1;color:#401d24;
  background:rgba(255,255,255,0.12);padding:4px 6px;border-radius:8px;font-weight:700;
}
.fruit .eyes{position:absolute;top:10px;left:50%;transform:translateX(-50%);display:flex;gap:6px}
.fruit .eye{width:6px;height:6px;border-radius:50%;background:#401d24;box-shadow:0 2px 0 rgba(0,0,0,0.06)}
/* fruit variants */
.fruit.straw{background:linear-gradient(135deg,#ff6b95,#ff3b7a)}
.fruit.melon{background:linear-gradient(135deg,#ffd66b,#ffaf3b);color:#401d24}
.fruit.grape{background:linear-gradient(135deg,#9b59ff,#7b2be6)}
.fruit.banana{background:linear-gradient(135deg,#ffd97a,#ffb84a);color:#401d24}
.fruit.apple{background:linear-gradient(135deg,#ff8b8b,#ff4b4b)}
.fruit.pear{background:linear-gradient(135deg,#b7f17d,#8fd13a);color:#401d24}

/* wiggle (dance) animation M2 */
@keyframes wiggle {
  0%{ transform: translateY(0) rotate(-4deg) scale(0.98) }
  25%{ transform: translateY(-6px) rotate(4deg) scale(1.02) }
  50%{ transform: translateY(0) rotate(-2deg) scale(1) }
  75%{ transform: translateY(-4px) rotate(6deg) scale(1.03) }
  100%{ transform: translateY(0) rotate(-4deg) scale(0.98) }
}

/* bounce occasional */
@keyframes bounceShort {
  0%{ transform: translateY(0) }
  50%{ transform: translateY(-10px) }
  100%{ transform: translateY(0) }
}

/* tiny popup styling */
.popup {
  position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:white;padding:18px;border-radius:12px;box-shadow:0 18px 40px rgba(0,0,0,0.18);z-index:10001;display:none;
}
.popup.show{display:block}

/* final footer */
footer{margin-top:22px;text-align:center;color:#7a3946;font-size:13px}

/* utility */
.hidden{display:none}
.small{font-size:13px;color:#7a3946}
.center{text-align:center}
.btn{padding:10px 14px;border-radius:999px;border:none;background:var(--pink);color:white;font-weight:700;cursor:pointer}
.btn.ghost{background:transparent;border:2px solid rgba(214,75,118,0.08);color:var(--rose)}
</style>
</head>
<body>
  <!-- fruit dancing stage -->
  <div class="fruit-stage" id="fruitStage" aria-hidden="true"></div>

  <div class="wrap">
    <header class="hero card">
      <div class="title">A Little Surprise ‚Äî For My Cutie ‚ù§Ô∏è</div>
      <div class="subtitle">Maui, Roxy, Valorant nights and Discord whispers ‚Äî this is for you. I‚Äôll always spoil you. üå∏</div>

      <div class="badge-row">
        <div class="badge">üéÆ Valorant duo</div>
        <div class="badge">üê± Roxy & pup lover</div>
        <div class="badge">‚òï Coffee & McDo</div>
        <div class="badge">üéµ Jereena ‚Ä¢ NIKI ‚Ä¢ Ariana</div>
      </div>

      <div style="margin-top:16px">
        <button id="openSurprise" class="open-btn">OPEN SURPRISE üíù</button>
      </div>
    </header>

    <div id="mainArea" class="grid hidden" aria-hidden="true">
      <!-- LEFT -->
      <main>
        <section class="card intro">
          <div class="avatar">üíï</div>
          <div>
            <h3>For my softie ‚Äî the one who says ‚Äúim here‚Äù</h3>
            <p>I love your laugh, your sleepy naps, the way you play Valo and come back to Discord to say ‚Äúim here‚Äù. You deserve everything ‚Äî I‚Äôll always spoil you. üíó</p>
            <div class="typing" id="typingPhrases"></div>
          </div>
        </section>

        <section class="card" aria-labelledby="loveletter">
          <h3 id="loveletter" style="margin-top:0;color:var(--rose);font-family:'Playfair Display',serif">My Love Letter</h3>
          <p style="margin-top:6px;color:#6b3a42">Baby, from the first time we clutched the spike together and laughed after a win, I knew I wanted you close. Your laugh ‚Äî it breaks through every bad day. When you say "im here", my world softens. You love Maui photos, you spoil Roxy, you sing along to Jereena and NIKI, you cry at Ariana's high notes ‚Äî and I love every tiny thing. I will give you everything. üíò</p>

          <div class="poem" style="margin-top:12px">
            <p>Sleep like the ocean, soft and deep ‚Äî</p>
            <p>I‚Äôll cup the stars and hum your favorite song,</p>
            <p>Bring you McFloat, ShakeShake fries (BBQ), warm coffee at dawn,</p>
            <p>Hold Roxy when she‚Äôs small and dance with Maui‚Äôs memory ‚Äî</p>
            <p>Baby, you deserve the whole world; please let me be the one to give it. awabyuu, i wub u.</p>
          </div>
        </section>

        <section class="card" style="margin-top:12px">
          <h4 style="margin:0 0 8px 0;color:var(--rose)">Little Joys (Your faves)</h4>
          <div class="mini-grid">
            <div class="mini"><h4>Music</h4><div class="small">Jereena ‚Ä¢ NIKI ‚Ä¢ Ariana</div></div>
            <div class="mini"><h4>Series</h4><div class="small">Game of Thrones (cozy rewatch)</div></div>
            <div class="mini"><h4>Food</h4><div class="small">ShakeShake Fries BBQ ‚Ä¢ McFloat ‚Ä¢ Coffee</div></div>
            <div class="mini"><h4>Best Things</h4><div class="small">Your laugh ‚Ä¢ Your naughty banters ‚Ä¢ "im here"</div></div>
          </div>

          <div class="discord" style="margin-top:12px">
            <!-- Discord chat mockup -->
            <div class="msg her">
              <div class="avatar-sm">R</div>
              <div>
                <div class="bubble">ihhh stoppp üò≥</div>
                <div class="time">Her ‚Ä¢ 9:03 PM</div>
              </div>
            </div>
            <div class="msg me">
              <div class="avatar-sm" style="background:linear-gradient(135deg,#ffd5e6,#ff9dbb)">U</div>
              <div>
                <div class="bubble">whyyy? you cute tho</div>
                <div class="time">You ‚Ä¢ 9:03 PM</div>
              </div>
            </div>
            <div class="msg her">
              <div class="avatar-sm">R</div>
              <div>
                <div class="bubble">eep na ako üíï</div>
                <div class="time">Her ‚Ä¢ 9:04 PM</div>
              </div>
            </div>
            <div class="msg her">
              <div class="avatar-sm">R</div>
              <div>
                <div class="bubble">i wub u ‚Äî awabyuu</div>
                <div class="time">Her ‚Ä¢ 9:04 PM</div>
              </div>
            </div>
            <div class="msg me">
              <div class="avatar-sm" style="background:linear-gradient(135deg,#ffd5e6,#ff9dbb)">U</div>
              <div>
                <div class="bubble">kiss? isa? üòΩ</div>
                <div class="time">You ‚Ä¢ 9:04 PM</div>
              </div>
            </div>
            <div class="msg her">
              <div class="avatar-sm">R</div>
              <div>
                <div class="bubble">im here üíó</div>
                <div class="time">Her ‚Ä¢ 9:04 PM</div>
              </div>
            </div>
          </div>
        </section>

        <section class="card" style="margin-top:12px">
          <h4 style="margin:0 0 8px 0;color:var(--rose)">Cute Gallery</h4>
          <div class="gallery">
            <div class="tile">üòΩ <div class="small">Roxy Snuggles</div></div>
            <div class="tile">üå∫ <div class="small">Maui Memory</div></div>
            <div class="tile">üéß <div class="small">Nap Playlist</div></div>
            <div class="tile">üçü <div class="small">ShakeShake</div></div>
          </div>
        </section>
      </main>

      <!-- RIGHT -->
      <aside class="right">
        <div class="panel card">
          <h4 style="margin:0 0 10px 0;color:var(--rose)">Playlists</h4>
          <div class="song-list">
            <div class="song"><span>Jereena ‚Äî Cozy Set</span><small>Tap to play chime</small></div>
            <div class="song"><span>NIKI ‚Äî Soft Indie</span><small>Tap to play chime</small></div>
            <div class="song"><span>Ariana ‚Äî Lullaby Notes</span><small>Tap to play chime</small></div>
          </div>
          <div style="display:flex;gap:8px;margin-top:10px">
            <button id="playJereena" class="btn">Play Jereena</button>
            <button id="playNiki" class="btn">Play NIKI</button>
            <button id="playAri" class="btn">Play Ariana</button>
          </div>
        </div>

        <div class="panel card">
          <h4 style="margin:0 0 10px 0;color:var(--rose)">Treats & Spoils</h4>
          <div class="food-row">
            <div class="food">ShakeShake Fries</div>
            <div class="food">McFloat</div>
            <div class="food">Hot Coffee</div>
            <div class="food">Extra Kisses</div>
          </div>
          <div style="margin-top:10px">
            <button id="spoils" class="btn ghost">Spoil Her Now</button>
          </div>
        </div>

        <div class="panel card">
          <h4 style="margin:0 0 10px 0;color:var(--rose)">Valorant Mini-Game</h4>
          <div class="game-top">
            <div class="timer" id="gameTimer">20s</div>
            <div class="score">Score: <span id="gameScore">0</span></div>
          </div>
          <div class="game-stage" id="gameStage" aria-label="Valorant mini-game area">
            <div style="position:absolute;left:8px;bottom:8px;font-size:12px;color:#7a3946" class="small">Gun cursor active while game running</div>
          </div>
          <div class="game-instructions small">Click the floating hearts to score. 20 second round. Gun-cursor V2 activated when you start the game.</div>
          <div style="display:flex;gap:8px;margin-top:10px">
            <button id="startGame" class="btn">Start Game</button>
            <button id="resetGame" class="btn ghost">Reset</button>
          </div>
        </div>

        <div class="panel card">
          <h4 style="margin:0 0 10px 0;color:var(--rose)">Roxy & Maui</h4>
          <div style="display:flex;gap:10px;align-items:center">
            <div style="font-size:36px">üê±üê∂</div>
            <div>
              <div style="font-weight:800;color:var(--rose)">Roxy</div>
              <div class="small">Your cute little sidekick ‚Äî always ready for cuddles.</div>
              <div style="height:8px"></div>
              <div style="font-weight:800;color:var(--rose)">Maui</div>
              <div class="small">A warm memory you both keep close.</div>
            </div>
          </div>
        </div>
      </aside>
    </div>

    <footer class="center" style="margin-top:18px">Made with endless love ‚Äî see you on our 3rd month, awabyuu üíó</footer>
  </div>

  <!-- popup for results -->
  <div id="popup" class="popup" role="dialog" aria-modal="true">
    <div id="popupContent"></div>
    <div style="text-align:center;margin-top:12px"><button id="closePopup" class="btn">Close</button></div>
  </div>

  <!-- gun cursor element (V2) -->
  <div id="gunCursor" class="gun-cursor" aria-hidden="true">üî´</div>

<script>
/* ---------------------------
   Helper & Initialization
   --------------------------- */
const openBtn = document.getElementById('openSurprise');
const mainArea = document.getElementById('mainArea');
const typingEl = document.getElementById('typingPhrases');
const fruitStage = document.getElementById('fruitStage');
const popup = document.getElementById('popup');
const popupContent = document.getElementById('popupContent');
const closePopup = document.getElementById('closePopup');

// phrases for typing
const phrases = [
  'ihhh... no na üò≥',
  'please... eep na ako üíï',
  'i wub u ‚Äî awabyuu ‚ù§Ô∏è',
  'kiss? isa? üòΩ',
  'im here üíó'
];
let tIdx=0;
function typeLoop(){
  const txt = phrases[tIdx % phrases.length];
  let i=0; typingEl.textContent='';
  const id = setInterval(()=>{
    typingEl.textContent += txt[i++] || '';
    if(i > txt.length){ clearInterval(id); tIdx++; setTimeout(typeLoop, 1500); }
  }, 45);
}

/* ---------------------------
   Fruit dancer (F2, M2, Medium)
   - expressive faces
   - dancing wiggle + occasional bounce
   - medium quantity: 12-16 active
   --------------------------- */
const FRUIT_VARIANTS = ['straw','melon','grape','banana','apple','pear'];
const FRUIT_LABELS = {
  'straw': 'Straw',
  'melon': 'Mel',
  'grape': 'Grap',
  'banana': 'Bana',
  'apple': 'Appl',
  'pear': 'Pear'
};
let fruitPool = [];
let fruitCountTarget = 14; // medium
let fruitInterval;

function makeFruit(id) {
  const el = document.createElement('div');
  el.className = 'fruit';
  const variant = FRUIT_VARIANTS[Math.floor(Math.random() * FRUIT_VARIANTS.length)];
  el.classList.add(variant);
  el.style.width = getComputedStyle(document.documentElement).getPropertyValue('--fruit-size') || '54px';
  el.style.height = getComputedStyle(document.documentElement).getPropertyValue('--fruit-size') || '54px';
  // position randomly inside viewport
  el.style.left = Math.random() * 85 + 'vw';
  el.style.top = Math.random() * 85 + 'vh';
  el.style.zIndex = 20 + Math.floor(Math.random()*50);
  // face & eyes
  const eyes = document.createElement('div'); eyes.className = 'eyes';
  const e1 = document.createElement('div'); e1.className='eye';
  const e2 = document.createElement('div'); e2.className='eye';
  eyes.appendChild(e1); eyes.appendChild(e2);
  const face = document.createElement('div'); face.className = 'face';
  // expressive emojis or words to emulate F2 look
  const faces = ['üôÇ','üòØ','üòù','ü•∫','üòã','üòç','ü§≠'];
  face.textContent = faces[Math.floor(Math.random()*faces.length)];
  el.appendChild(eyes);
  el.appendChild(face);

  // wiggle animation speed variance
  const speed = Math.random() * 2 + 3.2; // seconds
  el.style.animation = `wiggle ${speed}s ease-in-out ${Math.random()*0.6}s infinite`;
  // occasional bounce
  if(Math.random() > 0.6) {
    el.style.animation += `, bounceShort ${1.6 + Math.random()*1}s ease-in-out ${Math.random()*3}s infinite`;
  }

  // subtle horizontal movement via JS
  el.dataset.vx = (Math.random() * 0.6 - 0.3).toFixed(3);
  fruitStage.appendChild(el);
  return el;
}

function spawnFruits(target = fruitCountTarget) {
  // clear old
  fruitStage.innerHTML = '';
  fruitPool = [];
  for(let i=0;i<target;i++){
    fruitPool.push(makeFruit(i));
  }
  // small drift movement loop
  if(fruitInterval) clearInterval(fruitInterval);
  fruitInterval = setInterval(()=>{
    fruitPool.forEach(el=>{
      // sway horizontally
      const vx = parseFloat(el.dataset.vx) || 0;
      const left = parseFloat(el.style.left || '0') || 0;
      let newLeft = left + vx*1.6;
      if(newLeft < 1) newLeft = 1;
      if(newLeft > 92) newLeft = 92;
      el.style.left = newLeft + 'vw';
      // occasionally change face expression
      if(Math.random() < 0.02) {
        const faces = ['üôÇ','üòØ','üòù','ü•∫','üòã','üòç','ü§≠','ü§©','üòÅ'];
        const faceEl = el.querySelector('.face');
        if(faceEl) faceEl.textContent = faces[Math.floor(Math.random()*faces.length)];
      }
    });
  }, 260);
}

/* ---------------------------
   WebAudio simple chimes (melodies for 3 artists)
   --------------------------- */
let audioCtx;
function ensureAudio() {
  if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  return audioCtx;
}
function playMelody(notes = [440,660,880], durations=[0.25,0.25,0.5]) {
  const ctx = ensureAudio();
  const now = ctx.currentTime;
  const o = ctx.createOscillator();
  const g = ctx.createGain();
  o.type = 'sine';
  o.connect(g); g.connect(ctx.destination);
  let t = now;
  g.gain.setValueAtTime(0.0001, t);
  o.start(t);
  for(let i=0;i<notes.length;i++){
    o.frequency.setValueAtTime(notes[i], t);
    g.gain.linearRampToValueAtTime(0.08, t+0.01);
    t += durations[i];
    g.gain.exponentialRampToValueAtTime(0.0001, t);
  }
  o.stop(t+0.05);
}
document.getElementById('playJereena').addEventListener('click', ()=> {
  // gentle arpeggio
  playMelody([330,392,523,440],[0.18,0.18,0.22,0.22]);
});
document.getElementById('playNiki').addEventListener('click', ()=> {
  playMelody([220,277,330,277],[0.2,0.2,0.3,0.2]);
});
document.getElementById('playAri').addEventListener('click', ()=> {
  playMelody([440,660,880,660,440],[0.12,0.12,0.18,0.12,0.2]);
});

/* ---------------------------
   Open surprise (initialize typing + fruits)
   --------------------------- */
openBtn.addEventListener('click', ()=>{
  mainArea.classList.remove('hidden');
  mainArea.removeAttribute('aria-hidden');
  openBtn.scrollIntoView({behavior:'smooth',block:'start'});
  // start typed phrases and fruit dancers
  typeLoop();
  spawnFruits();
  // small welcome popup after open
  setTimeout(()=> showPopup(`<div style="font-weight:800;color:${getComputedStyle(document.documentElement).getPropertyValue('--rose')}">Surprise opened! üíù</div><div class="small" style="margin-top:6px">Click "Start Game" to play Valorant mini-game.</div>`), 800);
});

/* ---------------------------
   Spoil button small action
   --------------------------- */
document.getElementById('spoils').addEventListener('click', ()=> {
  spawnFruits(10);
  showPopup(`<div style="font-weight:800;color:${getComputedStyle(document.documentElement).getPropertyValue('--rose')}">Spoiling mode: ON ‚ú®</div><div class="small" style="margin-top:8px">Imagining ShakeShake + McFloat delivered to her. ‚ù§Ô∏è</div>`);
});

/* ---------------------------
   Popup helpers
   --------------------------- */
function showPopup(html) {
  popupContent.innerHTML = html;
  popup.classList.add('show');
}
closePopup.addEventListener('click', ()=> popup.classList.remove('show'));

/* ---------------------------
   Valorant mini-game (V2: gun cursor)
   - spawn heart targets inside gameStage
   - 20-second timer
   - gun cursor visible while running
   --------------------------- */
const startGameBtn = document.getElementById('startGame');
const resetGameBtn = document.getElementById('resetGame');
const gameStage = document.getElementById('gameStage');
const gameTimer = document.getElementById('gameTimer');
const gameScoreEl = document.getElementById('gameScore');
const gunCursor = document.getElementById('gunCursor');

let gameInterval, spawnInterval, remaining = 20, score = 0;
let gameRunning = false;
let activeTargets = [];

function randPosInGame(w, h) {
  const pad = 60;
  const x = Math.random()*(w - pad*2) + pad;
  const y = Math.random()*(h - pad*2) + pad;
  return {x,y};
}

function createTarget() {
  const t = document.createElement('div');
  t.className = 'target';
  // random color heart background
  const colors = ['#ff6b95','#ffd1e0','#ff9dbb','#d64b76','#ffb0c9'];
  t.style.background = colors[Math.floor(Math.random()*colors.length)];
  t.style.width = '52px';
  t.style.height = '52px';
  t.innerHTML = '‚ù§';
  // random pos inside gameStage bounds
  const rect = gameStage.getBoundingClientRect();
  const pos = randPosInGame(rect.width, rect.height);
  t.style.left = (pos.x - 26) + 'px'; // center
  t.style.top = (pos.y - 26) + 'px';
  t.style.transform = 'scale(0.95)';
  gameStage.appendChild(t);
  // animate bobbing
  const bobDur = 2 + Math.random()*1.6;
  t.animate([{transform:'translateY(0) scale(0.95)'},{transform:'translateY(-14px) scale(1.02)'},{transform:'translateY(0) scale(0.98)'}], {duration: bobDur*1000, iterations: Infinity, easing: 'ease-in-out'});
  // click listener
  t.addEventListener('click', (e)=>{
    if(!gameRunning) return;
    score++;
    gameScoreEl.textContent = score;
    // pop animation
    t.animate([{transform:'scale(1.0)'},{transform:'scale(1.6)'},{opacity:0}],{duration:240,easing:'ease-out'});
    // remove after short
    setTimeout(()=> { try{ t.remove(); }catch(e){} }, 260);
    // small pop effect heart near click
    showFloatingText('Headshot! ‚ô•', e.clientX, e.clientY);
  });
  // remove after some time to recycle
  setTimeout(()=> { try{ t.remove(); }catch(e){} }, 4200 + Math.random()*1600);
  activeTargets.push(t);
}

function startGame() {
  if(gameRunning) return;
  // reset
  score = 0; remaining = 20; gameScoreEl.textContent = score; gameTimer.textContent = remaining + 's';
  gameRunning = true;
  // show gun cursor
  gunCursor.style.display = 'flex';
  // attach mouse move to track cursor
  function moveGun(e){
    gunCursor.style.left = e.clientX + 'px';
    gunCursor.style.top = e.clientY + 'px';
  }
  window.addEventListener('mousemove', moveGun);
  // spawn loop: create 1-3 targets occasionally
  spawnInterval = setInterval(()=> {
    const spawnCount = 1 + Math.floor(Math.random()*2); // 1-2
    for(let i=0;i<spawnCount;i++) createTarget();
  }, 700);
  // initial burst
  for(let i=0;i<4;i++) setTimeout(()=>createTarget(), i*180);

  // timer
  gameInterval = setInterval(()=>{
    remaining--;
    gameTimer.textContent = remaining + 's';
    if(remaining <= 0) {
      endGame();
    }
  }, 1000);

  // store removal hook for later
  gunCursor._moveHandler = moveGun;
}

function endGame() {
  gameRunning = false;
  // hide gun and cleanup
  gunCursor.style.display = 'none';
  if(gunCursor._moveHandler) window.removeEventListener('mousemove', gunCursor._moveHandler);
  clearInterval(spawnInterval); clearInterval(gameInterval);
  // remove any remaining targets
  activeTargets.forEach(t => { try{ t.remove(); }catch(e){} });
  activeTargets = [];
  // result popup
  const msg = `<div style="font-weight:800;color:${getComputedStyle(document.documentElement).getPropertyValue('--rose')}">Round Over!</div>
               <div class="small" style="margin-top:8px">You scored <strong>${score}</strong>. ${score>8 ? 'Headshot champion! üòç' : 'So cute ‚Äî still stole my heart.'}</div>`;
  showPopup(msg);
}

function resetGame() {
  // force stop
  clearInterval(spawnInterval); clearInterval(gameInterval);
  activeTargets.forEach(t => { try{ t.remove(); }catch(e){} });
  activeTargets = [];
  gameRunning = false;
  gunCursor.style.display = 'none';
  score = 0; remaining = 20; gameScoreEl.textContent = score; gameTimer.textContent = remaining + 's';
}

// floating text helper (for hits)
function showFloatingText(text, x, y) {
  const el = document.createElement('div');
  el.style.position = 'fixed'; el.style.left = x + 'px'; el.style.top = y + 'px';
  el.style.transform = 'translate(-50%,-50%)'; el.style.zIndex = 9999;
  el.style.fontWeight = '800'; el.style.color = '#ff6b95';
  el.textContent = text;
  document.body.appendChild(el);
  el.animate([{opacity:1, transform:'translate(-50%,-50%) scale(1)'},{opacity:0, transform:'translate(-50%,-120%) scale(1.4)'}], {duration:900, easing:'ease-out'});
  setTimeout(()=> el.remove(), 900);
}

/* start/reset buttons */
startGameBtn.addEventListener('click', ()=> {
  resetGame(); startGame();
});
resetGameBtn.addEventListener('click', resetGame);

/* ---------------------------
  Gun cursor styling (V2)
  - we already use emoji üî´ in the gunCursor div
  - show only while gameRunning
  --------------------------- */

/* ---------------------------
   Accessibility: close popup on esc
   --------------------------- */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape') popup.classList.remove('show');
});

/* ---------------------------
   Start fruit dancers on page load (but not until user opens)
   - Also respawn occasionally to keep medium quantity
   --------------------------- */
let fruitRespawnTimer;
function ensureFruits() {
  spawnFruits(fruitCountTarget);
  if(fruitRespawnTimer) clearInterval(fruitRespawnTimer);
  fruitRespawnTimer = setInterval(()=> {
    // slightly randomize count a bit
    const newCount = 12 + Math.floor(Math.random()*5); // 12-16
    spawnFruits(newCount);
  }, 9000);
}

/* preload small behaviors */
window.addEventListener('load', ()=> {
  // no auto-start: user opens surprise first
});

/* cleanup before unload */
window.addEventListener('beforeunload', ()=> {
  if(fruitInterval) clearInterval(fruitInterval);
  if(fruitRespawnTimer) clearInterval(fruitRespawnTimer);
  clearInterval(gameInterval); clearInterval(spawnInterval);
});

/* Keep things snappy on mobile: tap to start audio context on first interaction */
document.body.addEventListener('click', function initAudioOnce() {
  // create audio context on first user gesture to allow sound later without blocking
  try {
    ensureAudio();
  } catch(e){}
  document.body.removeEventListener('click', initAudioOnce);
});

// ensure gun cursor not visible until start
gunCursor.style.display = 'none';

/* End of script */
</script>
</body>
</html>
